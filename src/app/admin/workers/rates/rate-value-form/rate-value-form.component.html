<app-form-base
  [backTo]="backTo()"
  [queryParams]="{ tab: '2' }"
  formIdName="rate-value-form"
  formTitle="Dokument"
  [canSend]="canSend()"
>
  <form
    [formGroup]="rateValueForm"
    class="form"
    id="rate-value-form"
    (submit)="handleSubmit()"
  >
    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title>Stawka</mat-card-title>
      </mat-card-header>
      <mat-card-content class="form-group">
        @if (this.update()) {
        <h3>{{ getRateName() }}</h3>
        } @else {
        <mat-form-field appearance="outline">
          <mat-label>Rodzaj Stawki</mat-label>
          <mat-select
            formControlName="rateId"
            (selectionChange)="verifyRateType()"
          >
            @for (rt of rates(); track rt.id) {
            <mat-option [value]="rt.id">{{ rt.name }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
        }
      </mat-card-content>
    </mat-card>

    <mat-card appearance="outlined">
      <mat-card-header>
        <mat-card-title>Wartości</mat-card-title>
      </mat-card-header>
      <mat-card-content class="form-group">
        @if (rateValueForm.controls.value.enabled) {
        <mat-form-field appearance="outline">
          <mat-label>Stawka</mat-label>
          <input
            matInput
            type="text"
            formControlName="value"
            placeholder="Stawka"
          />
        </mat-form-field>
        } @if (rateValueForm.controls.perHourOvertimeValue.enabled) {
        <mat-form-field appearance="outline">
          <mat-label>Stawka za Nadgodzine</mat-label>
          <input
            matInput
            type="text"
            formControlName="perHourOvertimeValue"
            placeholder="Nadgodzina"
          />
        </mat-form-field>
        } @if (rateValueForm.controls.perHourValue.enabled) {
        <mat-form-field appearance="outline">
          <mat-label>Stawka Za godzinę</mat-label>
          <input
            matInput
            type="text"
            formControlName="perHourValue"
            placeholder="Godzinowa"
          />
        </mat-form-field>
        }
      </mat-card-content>
    </mat-card>

    @if (update()) {
    <button mat-fab extended type="button" (click)="deleteRateValue()">
      <mat-icon>delete</mat-icon>
      Usuń Stawkę
    </button>
    }
  </form>
</app-form-base>
